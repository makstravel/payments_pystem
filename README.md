# üí≥ Payments System

Backend-—Å–µ—Ä–≤–∏—Å –Ω–∞ Django, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –ø—Ä–∏–µ–º –≤—Ö–æ–¥—è—â–∏—Ö webhook-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç –±–∞–Ω–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–º –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π.

## üìå –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- –ü—Ä–∏–µ–º POST-–∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç –±–∞–Ω–∫–∞ (`/api/webhook/bank/`)
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (`operation_id`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ —Å—É–º–º—ã –Ω–∞ –±–∞–ª–∞–Ω—Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ –ò–ù–ù (`payer_inn`)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ (–≤ –∫–æ–Ω—Å–æ–ª—å –∏–ª–∏ —Ç–∞–±–ª–∏—Ü—É)
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö MySQL
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `.env` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```
### ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```bash
DB_NAME=...
DB_USER=...
DB_PASSWORD=...
DB_HOST=...
DB_PORT=...
```

### üîÑ –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ –∑–∞–ø—É—Å–∫

```bash
python manage.py migrate
```
```bash
python manage.py runserver
```

### üì® –ü—Ä–∏–º–µ—Ä Webhook-–∑–∞–ø—Ä–æ—Å–∞

POST /api/webhook/bank/

```bash
{
  "operation_id": "ccf0a86d-041b-4991-bcf7-e2352f7b8a4a",
  "amount": 145000,
  "payer_inn": "1234567890",
  "document_number": "PAY-328",
  "document_date": "2024-04-27T21:00:00Z"
}
```
### –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –ø–æ –ò–ù–ù

GET /api/organizations/{INN}/balance/

```bash
{
  "inn": "1234567890",
  "balance": 145000
}
```
